<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Vireo: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Vireo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Vireo
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Compact runtime for Virtual Instruments</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Vireo Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>The Big Picture</h2>
<p>Vireo is a runtime engine. That means it works behind the scenes when a program it enables is run. It is not an ADE, there may be no window, no panel, no diagram. When a program is run, the inputs and outputs may be simple stdin/stdout streams, network I/O or raw digital I/O. Much like the standard C library, Vireo can be statically linked in a stand alone executable or built and used as a shared library. The programs that Vireo runs are loaded from a low level textual data flow language called VI-Assembly ( *.via). Parsing the VIA files is treated as the decoder portion of a codec so other formats can be supported. The development roadmap includes support for a more compact bytecode format (*.vib). While it is easy to write simple tests by hand, the preferred approach is to generate them directly from LabVIEW diagrams. The LabVIEW for LEGO Mindstorms module is the first module to include this support.</p>
<div class="image">
<img src="Vireo_bigpicture_workflow.png" alt="Vireo_bigpicture_workflow.png"/>
<div class="caption">
Vireo workflow</div></div>
<p> The Vireo runtime consists of subsystems to load user programs, connect them to functions provided by the host, and the execute them. Functionality is partitioned into the following primary parts:</p>
<p><b>Type Manager</b> - The type manager types, and instances of data including default values for each type. It has a dictionary to map names to defined types. Since types are a form of data, the concept of type and data along with the underlying allocation mechanism are tightly interwoven.</p>
<p><b>Functions</b> - The set of functions for math, IO, array, etc. they can be implemented in C++ or VI-assembly. The set of functions provided by the host can be statically linked or dynamically loaded by the runtime. Many of the core functions that make up the TypeManager and scheduler subsystems are registered as functions.</p>
<p><b>Scheduler</b> - The scheduler runs code according to LabVIEW’s parallel data-flow model of execution.</p>
<p><b>Dynamic Optimization</b> - The reference runtime is designed to be a good foundation for experimentation with dynamic optimization. Programs are executed using a technique called threaded code, which efficiently links native functions into threads of code. Its fast, but VI made of small operations will be slower than VI compiled to native code since parameters are used in individual operations are passed through memory, not registers. Vireo is designed to make it easy for a specific platform to instrument the code it loads and to subsequently compile select portions of code when metrics indicate there is sufficient merit to do so.</p>
<h2>Example 1: Hello World</h2>
<p>LabVIEW is a graphical language, so one could suggest that the LabVIEW Hello World program is simply a Panel with Label that says "Hello World". That's a plausible solution and would make it the simplest version on Wikipedia's list of Hello World programs. However, the spirit of the task is to generate output when executed that can then be used as input to a second program. For Linux/Unix/Windows, this is done by writing to the output stream of the process. Thus, when the program is run, it gets to say hello to the machine as well as the to the human. Like those examples, these use simple stdio. </p><h3>VI Assembly (*.via) files and regular VI files (*.vi)</h3>
<p>When a user develops a program (e.g. a diagram) with LabVIEW, the work is saved as a VirtualInstrument (.vi) file. These files are centered around the elements drawn by the user. When a VI is run using the traditional desktop workflow LabVIEW analyzes the high-level diagram and partitions it into sections of code that can be run by the host processor and it determines what memory will be needed for variables. The result of this analysis is directly turned into native code using LLVM for standard CPUs, or turned into VHDL for targeting FPGAs. Since the VI file describes high-level graphical objects, it cannot be directly loaded by Vireo. Instead, to target the Vireo runtime, the result of LabVIEW analysis is captured in a VI assembly file (.via). As an assembly file, VIA source is low-level. It has no graphical description elements and it is not commonly written by hand. It includes primitive operations like branching not directly accessible at the graphical diagram level. Here is a sample program:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;define (HelloWorld dv(.VirtualInstrument (</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    c(</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        e(dv(String &#39;hello, world&#39;) variable1)</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    )</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    clump(1</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        Print(variable1)</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    )</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;) ) )</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;enqueue (HelloWorld)</div></div><!-- fragment --><p> The HelloWorld.via file is a script made up of commands. In this case there are two commands. The first command defines a VI, and the second one enqueues the VI onto the Vireo run queue. The VI is made of the following basic parts.</p><ul>
<li>A Name ‘HelloWorld’</li>
<li>A Data-space (its a cluster) with one variable named variable1. The variable has the default value 'hello, world'</li>
<li>One Clump of code with a fire count of 1 ( more on that later)</li>
<li>One instruction that will call the Print function when executed.</li>
<li>Once the VI is enqueued, the execution system in Vireo will execute instructions in all active clumps until there are no more to execute. The enqueue command is very similar to what LabVIEW does when a user presses the go button.</li>
</ul>
<p>A VIA file can be run directly from a command line using Vireo's egg shell (esh). The launch time is similar to other command line tools like “ls” </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;# run from your unix/linux/windows prompt</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;$esh HelloWorld.via</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;hello, world</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;# make sure it runs fast</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;$time esh HelloWorld.via</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;hello, world</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;real    0m0.005s</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;user    0m0.003s</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;sys 0m0.002s</div></div><!-- fragment --><h2>Next Steps</h2>
<ul>
<li><a href="index.html">Introduction</a></li>
<li><a href="md_dox__intro_type_examples.html">Some more simple type examples</a></li>
<li><a href="md_dox__intro_array_examples.html">Some array type examples</a></li>
<li><a href="md_dox__intro_parallel_clump_examples.html">VIs with parallel execution</a></li>
<li><a href="md_dox__type_manager.html">The TypeManager</a> </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
