<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Vireo: IntroArrayExamples</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Vireo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Vireo
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Compact runtime for Virtual Instruments</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">IntroArrayExamples </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Introduction to arrays</h2>
<h3>Example 5: Arrays</h3>
<p>Arrays come in three forms Fixed size, Variable and Bounded. When a variable is defined, any of the forms can be used. Input to functions are generally always typed as variable.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;define (ArrayDemo, dv(.VirtualInstrument, (</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    c(</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        e(a(Int32 *)     variableArray1d)</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        e(a(Int32 5)     fixedArray1d)</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        e(a(Int32 -5)    boundedArray1d)</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        // Variable size arrays size to fit initializer list</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        e(dv(a(Int32 *) (1 2 3 4))  variableArray1dwithDefaults)</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        // Extra initializers added as needed</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        e(dv(a(Int32 5) (1 2 3 4))  fixedArray1dwithDefaults)</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;        // Size set by number of initializers</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        e(dv(a(Int32 -5) (1 2 3 4)) boundedArray1dwithDefaults)</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    )</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    clump(</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;        Print(variableArray1d)</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;        Print(fixedArray1d)</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        Print(boundedArray1d)        </div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;        Print(variableArray1dwithDefaults)</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;        Print(fixedArray1dwithDefaults)</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;        Print(boundedArray1dwithDefaults)</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;   )</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;) ) )</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;enqueue (ArrayDemo)</div></div><!-- fragment --><h3>The IntIndex type</h3>
<p>Internally Vireo defines a C++ typedef <em>IntIndex</em> for use in array indexing calculations. The type is not directly tied to the size_t defined by the C++ compiler. Currently, it is set to Int32, so the number of elements in any one array is limited to 2^31 though the total size of the elements may require more the 2^31 bytes. When Vireo is compiled in 64 bit mode, programs can work with sets of data so long as no one contiguous array exceeds the element count limit. While the IntIndex type is used in the core routines, many of the VIA exposed APIs are still defined directly as Int32 (In order to match LabVIEW) so there is still work to be done before Int64 indexes will work.</p>
<h3>Variable sized arrays</h3>
<p>The most common array type is the variable sized arrays. In VIA variable dimensions are identified by an asterisk '*' internally this is encoded as IntIndex.Min meaning the most negative number for the IntIndex type. This means a variable sized array can be considered an array whose dimension can be up to the maximum</p>
<h3>Fixed Sized Arrays</h3>
<p>Resizing a Fixed Size array has no effect.</p>
<h3>Bounded Arrays</h3>
<p>Bounded arrays specify an maximum size up when defined. In the reference runtime, their storage is allocated at data initialization time, so no allocation occurs when the logical size of the array is changed. Resizing an array to a size beween 0 and its bounded size will change it to that size. Attempting to size it larger that then maximum will leave it unaffected. Note that whie storage reallocation ins not necessary for bounded arrays. Reallocation can still occur if the size of the elements are themselves dynamic in size. For example, a bounded array of strings.</p>
<h3>Zero Dimensional Arrays</h3>
<p>Zero dimensional arrays are arrays that have no dimensions, not arrays that have a dimension of zero. ZDAs are a bit unique methematically in that they always contain one element while, in comparison arrays with 1 or more dimensions can be empty if one of the dimension sizes is set to 0. ZDA types are not directly used from LabVIEW diagrams but Vireo uses them internally. A key characteristice of ZDAs is that it is possible to detect if the element is holding anything. This makes ZDAs the internal basis for nullable types, LabVIEW variants and objects. For this reason the IsArray() test is slightly different from checking for Rank() greater than 0.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;c(</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    e(a(Int32 *)       1DArray)            // IsArray = true;  Rank = 1</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    e(a(Int32 * *)     2DArray)            // IsArray = true;  Rank = 2</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    e(a(Int32 * * *)   3DAdday)            // IsArray = true;  Rank = 3</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    e(Int32            SimpleScalar)       // IsArray = false; Rank = 0</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    e(a(Int32)         0DArrayOfInt32)     // IsArray = true;  Rank = 0</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    e(a(*)             0DArrayOfGeneric)   // IsArray = true;  Rank = 0</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;)</div></div><!-- fragment --><h3>Running out of memory</h3>
<p>Each TypeManger and its corresponding ExecutionContext has a memory threshold, if an array operation would take the total allocation above that limit the allocation fails.</p>
<h2>Next Steps</h2>
<ul>
<li><a href="index.html">Introduction</a></li>
<li><a href="md_dox__intro_type_examples.html">Some more simple type examples</a></li>
<li><a href="md_dox__intro_array_examples.html">Some array type examples</a></li>
<li><a href="md_dox__intro_parallel_clump_examples.html">VIs with parallel execution</a></li>
<li><a href="md_dox__type_manager.html">The TypeManager</a> </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
